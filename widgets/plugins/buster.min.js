/*!
 * widgets
 * @version: 9.0.017.30
 * @license: Genesys Telecom Labs
 */
widgetsJsonpFunction([30],{"./webapp/plugins/cx-buster/cx-buster.js":function(e,t,o){"use strict";var r,n,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=[o("./node_modules/jquery/dist/jquery.js"),o("./webapp/plugins/cx-common/cx-common.js"),o("./node_modules/urijs/src/URI.js")],void 0!==(n=function(e,t,o){var r=CXBus.registerPlugin("Buster");if(r){var n=function(o){var n=o.type||!1;"command"==n?r.command(o.name,o.options):"event"==n?r.publish(o.name):"function"==typeof o&&o(e,d,t)},d={command:r.command,publish:r.publish,republish:r.republish},a=function(e){console.debug(e)},i="",u={},l=[],c=0,m=-1,f=0,p=!1,g=!1,b=0,y=!1,v={},T=!1,j=!1,h=!0,C=!0,x=1e3,S=100,w=800;r.registerCommand("configure",function(t){if(t.data){var o=t.data;"object"==(void 0===o?"undefined":s(o))&&("boolean"==typeof o.online&&(h=o.online),"number"==typeof o.stopOnFailedTest&&(C=o.stopOnFailedTest),"number"==typeof o.globalStepTimeout&&(x=o.globalStepTimeout),"number"==typeof o.globalStepWait&&(S=o.globalStepWait),"number"==typeof o.globalTestWait&&(w=o.globalTestWait),"string"==typeof o.testFolder&&(i=o.testFolder),o.modules&&o.modules.length>0&&e.each(o.modules,function(e,t){r.command("fetchTestModule",{module:t})})),t.deferred.resolve()}else t.deferred.reject("Invalid configuration")}),r.registerCommand("start",function(e){var t=e.data;"boolean"==typeof t.online&&(h=t.online),"number"==typeof t.stopOnFailedTest&&(C=t.stopOnFailedTest),"string"==typeof t.globalStepTimeout&&(x=t.globalStepTimeout),"string"==typeof t.globalStepWait&&(S=t.globalStepWait),"string"==typeof t.globalTestWait&&(w=t.globalTestWait),F(),r.publish("started"),e.deferred.resolve()}),r.registerCommand("stop",function(e){O(),r.publish("stopped"),e.deferred.resolve()}),r.registerCommand("complete",function(e){v.pass=!0,r.republish("completed",v),O(),e.deferred.resolve()}),r.registerCommand("registerTests",function(t){var o=t.data;o.module&&(clearTimeout(u[o.module].timeout),o.tests?(u[o.module].loaded=!0,u[o.module].tests=o.tests):o.group&&e.each(o.group,function(e,t){r.command("fetchTestModule",{module:t})})),A(),t.deferred.resolve()}),r.registerCommand("fetchTestModule",function(e){if(e.data.module){u[e.data.module]={loaded:!1,tests:[],timeout:setTimeout(function(){u[e.data.module].loaded="timeout",A()},3e3)},l.push(e.data.module);var t=document.createElement("script");t.type="text/javascript",t.src=i+"/"+e.data.module+".tests.js",document.head.appendChild(t)}});var A=function(){var e=!0;for(var t in u)!0!==u[t].loaded&&(e=!1);return e&&(r.publish("allTestsLoaded"),console.log("allTestsLoaded")),e},I=function(){T||(y=u[l[c]]&&u[l[c]].tests[m],y?y.online&&!h?(k("skipped","Online tests are disabled"),F()):f==y.steps.length?(k("pass"),F()):(p=l[c],g=y.name,!0===y.online&&!1===h?(k("skipped","Online tests are currently disabled"),F()):r.command("runNextStep").done(function(e){W()}).fail(function(e){k("failed",e),C?r.command("stop"):F()})):u[l[c]]&&!u[l[c]].tests[m+1]&&u[l[c+1]]&&u[l[c+1]].tests[0]?(a(l[c+1]),D()):!u[l[c]]||u[l[c]].tests[m+1]||u[l[c+1]]||(T=!0,r.command("complete")))},W=function(){T||setTimeout(function(){f++,I()},S)},F=function(){T||setTimeout(function(){T||(m++,f=0,I(),y&&a("Running Test: "+y.name))},w)},D=function(){T||(c++,m=0,f=0,I())},O=function(){a("---- All Tests Passed ("+b+" skipped) ----"),T=!0,a(v),M()},R=function(e){a('---- "'+g+'" failed at step #'+(f+1)+' due to "'+e+'". Aborting. ----'),T=!0,a(v),v.pass=!1,r.republish("completed",v),M()},k=function(t,o){v[p]||(v[p]={}),v[p][g]=e.extend(v[p][g]||{},{name:g,result:t,step:f,desc:o}),v[p][g],a("-- "+t+(o?" ("+o+")":"")),r.republish("testComplete",v[p][g]),"skipped"==t&&b++,"failed"==t&&R(o)},M=function(){c=0,m=-1,f=0,p=!1,g=!1,y=!1,v={},T=!1,j=!1,b=0};r.registerCommand("runNextStep",function(o){var n=y&&y.steps[f],s=!1;n?("command"==n.type?s=r.command("testCommand",n):"subscribe"==n.type?s=r.command("testEvent",n):"wait"==n.type?s=r.command("wait",n):"async"==n.type?s=r.command("testAsync",n):"data"==n.type&&(s=r.command("testData",n)),s?s.done(function(e){o.deferred.resolve(e||{})}).fail(function(e){o.deferred.reject(e||{})}):"function"==typeof n?n(e,d,t)?o.deferred.resolve():o.deferred.reject("function test failed"):o.deferred.reject("Invalid Testing Step Type: "+n.type)):F()}),r.registerCommand("testCommand",function(o){var n=o.data,s=setTimeout(function(){n.trigger?"function"==typeof n.trigger&&n.trigger(e,d,t):o.deferred.reject("timeout")},parseInt(n.timeout)||x);r.command(n.name,n.options||{}).done(function(e){clearTimeout(s),"resolved"==n.result?(n.returns&&e!=n.returns&&o.deferred.reject("Returned data is not as expected"),o.deferred.resolve()):"rejected"==n.result&&o.deferred.reject("Did not reject as expected")}).fail(function(e){clearTimeout(s),"rejected"==n.result?n.returns&&e!=n.returns?o.deferred.reject("Returned data is not as expected"):o.deferred.resolve():"resolved"==n.result&&o.deferred.reject("Did not resolve as expected")})}),r.registerCommand("testEvent",function(e){var t=e.data,o=setTimeout(function(){e.deferred.reject("timeout")},parseInt(t.timeout)||x);if(r.subscribe(t.name,function(n){clearTimeout(o),t.returns&&n!=t.returns?e.deferred.reject("Returned data is not as expected"):e.deferred.resolve(),r.unsubscribe(n.event)}),t.trigger)if(Array.isArray(t.trigger))for(var s=0;s<t.trigger.length;s++)n(t.trigger);else n(t.trigger)}),r.registerCommand("testUnsubscribe",function(e){var t=e.data;r.unsubscribe(t.name)?t.returns&&e1!=t.returns?e.deferred.reject("Returned data is not as expected"):e.deferred.resolve():e.deferred.resolve("Could not succussfully unsubscribe from: "+t.name)}),r.registerCommand("wait",function(e){parseInt(e.data.time)>=1?setTimeout(function(){e.deferred.resolve()},e.data.time):e.deferred.reject("Invalid wait time specified. Must be equal to, or greater than, 1 millisecond.")}),r.registerCommand("testAsync",function(o){console.log("testAsync",o.data);var r=o.data,n=setTimeout(function(){o.deferred.reject("timeout")},parseInt(r.timeout)||x);"function"==typeof r.test?(r.test(o.deferred,e,d,t),o.deferred.done(function(){clearTimeout(n)})):(clearTimeout(n),o.deferred.reject("Async test not a function"))}),r.registerCommand("testData",function(e){console.log("testData",e.data);var t=e.data;if("string"==typeof t.name){var o=r.data(t.name);t.value===r.data(t.name)?e.deferred.resolve():e.deferred.reject("Data did not match provided value ("+t.name+" == "+t.value+", Actual: "+o+")")}else e.deferred.reject("No data name provided")}),r.command("configure",_genesys.widgets.buster),r.ready(),r.republish("ready")}}.apply(t,r))&&(e.exports=n)}},["./webapp/plugins/cx-buster/cx-buster.js"]);